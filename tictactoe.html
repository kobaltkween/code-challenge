
<!DOCTYPE html>
<!--
   Here is my response to your coding challenge.  
   Thanks so much for the opportunity.  
   I decided to make this in just HTML/CSS/JS, because it seemed like 
   a purely client side problem.  
   
   I see you support IE going pretty far back on Rare.us.  Which makes 
   sense for such a high traffic site.  I figure that fits your traffic 
   data. But since 
			* IE is now only supported in the latest version for the platform
			* Windows 7 and higher are the bulk of Windows OS's
			* Firefox and Chrome both push updates pretty regularly and heavily
			* Apple seems to do the same with Safari
			
	I'm going to stick with IE10+ and modern browser solutions for this 
	limited audience.
-->
<html>
	<head>
		<meta charset="utf-8">
		<title>Tic Tac Toe Coding Challenge</title>
		<link href="https://fonts.googleapis.com/css?family=Lora:400,400italic" rel="stylesheet" type="text/css">
		<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic' rel="stylesheet" type="text/css">
		<style>
			* {
					box-sizing: border-box;
				}
			html {
				background-color: #f4f4f4;
			}
			body {
				background-color: white;
				color: black;
				margin: 0 auto;
				max-width: 800px;
				min-width: 420px;
				width: 75%;
				border-left: 1px solid #ddd;
				border-right: 1px solid #ddd;
				box-shadow:0 0 25px #ddd;
				min-height: 100vh;
				clear: both;
				padding: 10px;
			}
			body, p, ul, ol, td {
				font-family: "Source Sans Pro", Helvetica, Arial, sans-serif;
				margin-top: 0;
				padding-top: 0;
			}
			h1, h2, h3 {
				font-family: Lora, Georgia, Times, serif;
				font-weight:  normal;
				margin-top: 0;
			}
			h1 {
				font-size: 48px;
				text-align: center;
				margin-bottom: 25px;
				padding-top: 15px;
			}
			table {
				border-collapse: collapse;
			}
			#board, #instructions {
				position: relative;
				float: left;
				margin: 1%;
				padding: 1%;
				width: 48%;
			}
			#board table {
				height: 300px;
				width: 300px;
				margin: 20px;
			}
			#board table td {
				height: 100px;
				width: 100px;
				text-align: center;
				vertical-align: center;
				font-size: 48px;
				font-family: Lora, Georgia, Times, serif;
			}
			#board table tr#row2 {
				border-top: 1px solid #444;
				border-bottom: 1px solid #444;
			}
			#board table tr td:nth-child(2){
				border-right: 1px solid #444;
				border-left: 1px solid #444;
			}
			.mark {
				font-size: 30px;
				padding: 10px;
				font-family: Lora, Georgia, Times, serif;
				font-weight: 600;
				vertical-align: middle;
				cursor: pointer;
				display: inline-block;
			}
			.mark:focus, #board table tr td:focus {
				background-color: #eee;
			}
			.warning {
				font-size: 20px;
				font-weight: 600;
			}
			.right {
				text-align: right;
			}
			a#reset {
				transition: all 0.5s ease;
				border: 1px solid #ddd;
				background-color: #eee;
				box-shadow: 
					inset 0 0 10px #fff,
					inset 0 0 1px #fff,
					0 0 2px #ddd;
				padding: 10px;
				border-radius: 50vh;
				font-size: 20px;
				display: none;
			}
			a#reset:hover, a#reset:focus {
				box-shadow: 
					inset 0 0 15px #fff,
					inset 0 0 4px #fff,
					0 0 16px #eee,
					0 2px 4px #888;
					cursor: pointer;
			}
			p#chosen {
				display: none;
			}
			#board p.warning {
				/*display: none;*/
				font-size: 20px;
				background-color: orange;
				color: white;
				padding: 10px;
				border-radius: 10px;
				margin-top: 50px;
			}
		</style>
	</head>

	<body>
		<header>
			<h1>TicTacToe Coding Challenge</h1>
		</header>
		<main>
			<noscript>
				<p class="warning">Sorry! This game won't work unless you turn on JavaScript.  
				Please change your browser or plugin settings to allow this script to run.</p>
			</noscript>
			<div id="board">
				<p id="choice">Choose: <span class="mark">X</span> or <span class="mark">O</span></p>
				<p id="chosen">You chose: <span class="mark">X</span> You get to make the first move.</p>
				<table>
					<tr id="row1"><td></td><td></td><td></td></tr>
					<tr id="row2"><td></td><td></td><td></td></tr>
					<tr id="row3"><td></td><td></td><td></td></tr>
				</table>
				<p class="right"><a id="reset">Reset Game</a></p>
				<p class="warning">Test warning</p>
			</div>
			<div id="instructions">
				<h2>Instructions</h2>
				<ol>
					<li>Click or tab and select "X" or "O".</li>
					<li>Click or tab and select the empty square you want to use.</li>
					<li>Play until you or the computer win.</li>
				</ol>
			</div>
		</main>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
		<script type="text/javascript">
				
			(function($) {
				// Initialize player choice
				var pMark = cMark = "";
				
				var wins = [[1,2,3], [4,5,6], [7,8,9], [1,4,7], [2,5,8], 
							[3,6,9], [1,5,9], [3,5,7]];
				var board = Array(9);
				function initBoard() {
					console.log("Initialize the board.");
					// Re-initializes values
					pMark = cMark = "";
					wins = [[1,2,3], [4,5,6], [7,8,9], [1,4,7], [2,5,8], 
							[3,6,9], [1,5,9], [3,5,7]];
					board = Array(9);
					// Reset the mark choices
					// Clear the board and reset its properties
				}
				
				function win(marked) {
					console.log("Win function called!");
					for (var i; i < marked.length; i++) {
						$("#board table tr td").eq(marked - 1).
					// Make the reset button visible
					// Give the reset button the ability to reset the game
				}
				
				// Function returns false if new mark won game
				// False if it hasn't
				function score(mark, place) {
					oMark = (mark === "X") ? "O" : "X";
					for (i = 0; i < wins.length; i++) {
						// Select only possible wins
						if (wins[i] !== null && wins[i].indexOf(place) !== -1) {
							// Start an array of places with marks
							markCount = [];
							for (j = 0; j < wins[i].length; j++) {
								if (board[wins[i][j] -1] === oMark) {
									wins[i] = null;
									break;
								} else if (board[wins[i][j] - 1] === mark) {
									// Add to the tally of marks in a win
									markCount.push(wins[i][j]);
								}
							}
							if (markCount.length === 3) {
								// There's been a win; stop playing
								win(markCount);
								console.log("That's a win!");
								return false;
							}
						}
					}
					// No win yet; keep playing
					console.log("No win yet.");
					return true;
				}
				
				function move(mark) {
					oMark = (mark === "X") ? "O" : "X";
					// First see if there's a winning move
					// Then see if there's an opposing win to block
					// Then see what move has the most winning possibilities
					// Return the place to mark
				}
				// Give player ability to choose "X" or "O"
				$("#choice span.mark")
					.attr({
						role: "button",
						tabindex: function(i){ return i + 1}})
					.on("click keypress", function(e) {
						if (e.type === "click" || (e.type === "keypress" 
									&& (e.which === 13 || e.which === 32))) {
							pMark = $(this).text();
							cMark = (pMark === "X") ? "O" : "X";
							$("#chosen span.mark").html(pMark);
							$("#choice").fadeOut(250, function() {
								$("#chosen").fadeIn(250, function() {
									// Make board's squares clickable
									$("#board table tr td")
										.attr({
											role: "button",
											tabindex: function(i){ return i + 1},
											id: function(i){ return i + 1 }
										})
										.on("click keypress", function(e) {
											if (e.type === "click" || (e.type === "keypress" 
													&& (e.which === 13 || e.which === 32) && $(this).text() === "")) {
												place = $(this).prop("tabindex");
												// Add player's mark to the visible board
												$(this).text(pMark);
												// Change the board array
												if (typeof(board[place - 1]) === "undefined") {
													board[place - 1] = pMark;
												} else {
													// Something has gone very wrong
													// Alert the player
												}
												// Test and change wins for win or finished
												if (score(pMark, place)) {
													// Calculate best move
													// Add computer's mark
													// Test for win
												} else {
													
													// Highlight winning strip
													// Make reset button visible
													// Add functionality to reset button
												}
												// Remove events
												$(this).off("click");
											} else if (e.type === "keypress") {
												// NOTE: which registered 0 for all arrow keys
												// Need to use keyCode for all of them
												if (e.keyCode === 37) {
													// If press left arrow
													// See if it's in the left most column
													if (wins[3].indexOf($(this).prop("tabindex")) === -1) {
														// If not, change focus to cell - 1	 
														$("#board table tr td").eq($(this).prop("tabindex") - 2).focus();
													}
												} else if (e.keyCode === 38) {
													// If press up arrow
													// See if it's in the top row
													if (wins[0].indexOf($(this).prop("tabindex")) === -1) {
														// If not, change focus to cell - 3
														$("#board table tr td").eq($(this).prop("tabindex") - 4).focus();
													}
												} else if (e.keyCode === 39) {
													// if press right arrow
													// See if we're in the right-most column
													if (wins[5].indexOf($(this).prop("tabindex")) === -1) {
														// If not, change focus to cell + 1
														$("#board table td").eq($(this).prop("tabindex")).focus();
													}
												} else if (e.keyCode === 40) {
													// If press down arrow
													// See if we're in the bottom column
													if (wins[2].indexOf($(this).prop("tabindex")) === -1) {
														// If not, change focus to cell + 3
														$("#board table td").eq($(this).prop("tabindex") + 2).focus();
													}
												} else if (!isNaN(String.fromCharCode(e.which))) {
													// The numbers are all keyCode 0
													// Need to use which for them
													var num = String.fromCharCode(e.which);
													if (num == 0) {
														num = 1;
													}
													$("#board table td").eq(num -1).focus();
													// Move the focus to cell number 
												}
											}
										});
								});
							});
						}
					});
				}(jQuery));
		</script>
	</body>

</html>
